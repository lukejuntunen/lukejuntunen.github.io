"use strict";(self.webpackChunknextpod=self.webpackChunknextpod||[]).push([["src_views_Actions_vue"],{6946:(t,n,i)=>{i.d(n,{Z:()=>r});var a=i(7537),e=i.n(a),o=i(3645),s=i.n(o)()(e());s.push([t.id,".empty-content h1[data-v-1995f55c]{font-size:1.5rem;font-weight:500;margin:0;margin-bottom:1rem}div.actions[data-v-1995f55c]{padding:20px var(--nextpod-navigation-height) 0 var(--nextpod-navigation-height)}a.link[data-v-1995f55c]{text-decoration:underline;color:var(--color-primary-element)}","",{version:3,sources:["webpack://./src/views/Actions.vue"],names:[],mappings:"AACA,mCACE,gBAAA,CACA,eAAA,CACA,QAAA,CACA,kBAAA,CAGF,6BACE,gFAAA,CAGF,wBACE,yBAAA,CACA,kCAAA",sourcesContent:["\n.empty-content h1 {\n  font-size: 1.5rem;\n  font-weight: 500;\n  margin: 0;\n  margin-bottom: 1rem;\n}\n\ndiv.actions {\n  padding: 20px var(--nextpod-navigation-height) 0 var(--nextpod-navigation-height);\n}\n\na.link {\n  text-decoration: underline;\n  color: var(--color-primary-element);\n}\n"],sourceRoot:""}]);const r=s},4108:(t,n,i)=>{i.d(n,{Z:()=>r});var a=i(7537),e=i.n(a),o=i(3645),s=i.n(o)()(e());s.push([t.id,":root{--nextpod-navigation-height: 64px;--nextpod-navigation-spacing: calc((var(--nextpod-navigation-height) - 44px) / 2)}button.app-navigation-toggle{top:0 !important;right:calc(var(--nextpod-navigation-height)*-1) !important;margin:var(--nextpod-navigation-spacing) !important}","",{version:3,sources:["webpack://./src/views/HeaderNavigation.vue"],names:[],mappings:"AACA,MACC,iCAAA,CAEA,iFAAA,CAID,6BAEC,gBAAA,CACA,0DAAA,CACA,mDAAA",sourcesContent:["\n:root {\n\t--nextpod-navigation-height: 64px;\n\t// header height - button size\n\t--nextpod-navigation-spacing: calc((var(--nextpod-navigation-height) - 44px) / 2);\n}\n\n// Properly position the navigation toggle button\nbutton.app-navigation-toggle {\n\t// App-navigation have a 4px margin top\n\ttop: 0 !important;\n\tright: calc(var(--nextpod-navigation-height) * -1) !important;\n\tmargin: var(--nextpod-navigation-spacing) !important;\n}\n\n"],sourceRoot:""}]);const r=s},2445:(t,n,i)=>{i.d(n,{Z:()=>r});var a=i(7537),e=i.n(a),o=i(3645),s=i.n(o)()(e());s.push([t.id,".nextpod-navigation[data-v-892703f4]{position:sticky;z-index:20;top:0;display:flex;align-items:center;width:100%;min-height:var(--nextpod-navigation-height);padding:0 var(--nextpod-navigation-height);background:var(--color-main-background);margin-top:10px}.nextpod-navigation__back[data-v-892703f4]{position:absolute !important;left:0;margin:var(--nextpod-navigation-spacing) !important}.nextpod-navigation__title[data-v-892703f4]{margin-right:calc(2*var(--nextpod-navigation-spacing));display:flex;flex-direction:column}.nextpod-navigation__title__main[data-v-892703f4]{margin:0;cursor:pointer}.nextpod-navigation__title__main[data-v-892703f4],.nextpod-navigation__title__sub[data-v-892703f4]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.nextpod-navigation__loader[data-v-892703f4]{margin-left:32px}.nextpod-navigation__content-right[data-v-892703f4]{display:flex;align-items:center;justify-content:center;margin-left:auto}","",{version:3,sources:["webpack://./src/views/HeaderNavigation.vue"],names:[],mappings:"AACA,qCACC,eAAA,CACA,UAAA,CACA,KAAA,CACA,YAAA,CACA,kBAAA,CACA,UAAA,CACA,2CAAA,CACA,0CAAA,CACA,uCAAA,CACC,eAAA,CAED,2CAEC,4BAAA,CACA,MAAA,CACA,mDAAA,CAGD,4CAEC,sDAAA,CACA,YAAA,CACA,qBAAA,CAEA,kDACC,QAAA,CACA,cAAA,CAGD,mGACC,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,6CACC,gBAAA,CAGD,oDACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,gBAAA",sourcesContent:["\n.nextpod-navigation {\n\tposition: sticky;\n\tz-index: 20;\n\ttop: 0;\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n\tmin-height: var(--nextpod-navigation-height);\n\tpadding: 0 var(--nextpod-navigation-height);\n\tbackground: var(--color-main-background);\n  margin-top: 10px;\n\n\t&__back {\n\t\t// Above the navigation menu\n\t\tposition: absolute !important;\n\t\tleft: 0;\n\t\tmargin: var(--nextpod-navigation-spacing) !important;\n\t}\n\n\t&__title {\n\t\t//max-width: 50%;\n\t\tmargin-right: calc(2 * var(--nextpod-navigation-spacing));\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__main {\n\t\t\tmargin: 0;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&__main, &__sub {\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t}\n\n\t&__loader {\n\t\tmargin-left: 32px;\n\t}\n\n\t&__content-right {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-left: auto;\n\t}\n}\n\n"],sourceRoot:""}]);const r=s},386:(n,i,a)=>{a.r(i),a.d(i,{default:()=>T});var e=a(3455),o=a.n(e),s=a(8266),r=a.n(s),l=a(3299),c=a.n(l),A=a(8785),p=a(5139),d=a(2945),g=a.n(d),v=a(5400),h=a.n(v),u=a(8926),m=a(9598),C=a(9753),_=a(4820),x=a(2880),f=a(6893);const y=[{label:"Play",action:"PLAY"},{label:"Download",action:"DOWNLOAD"}],b={name:"Actions",components:{HeaderNavigation:f.Z,NcEmptyContent:o(),NcMultiselect:r(),Podcast:u.Z,PageNext:m.Z,NcSettingsSection:c(),SubscriptionListItem:A.Z,ActionListItem:p.Z,NcActionButton:h(),NcActions:g()},data:()=>({allActions:[],actions:[],maxActions:10,isLoading:!0,actionFilter:y[0],actionFilteringOptions:y,hasNotesApp:!1,refreshIntervalId:null}),async mounted(){this.checkNotesApp(),await this.loadData(),this.refreshIntervalId=setInterval(this.loadData,6e4)},async beforeUnmount(){clearInterval(this.refreshIntervalId)},methods:{checkNotesApp(){this.hasNotesApp=function(t,n,i){const a=document.querySelector(`#initial-state-${t}-${n}`);if(null===a){if(void 0!==i)return i;throw new Error(`Could not find initial state ${n} of ${t}`)}try{return JSON.parse(atob(a.value))}catch(i){throw new Error(`Could not parse initial state ${n} of ${t}`)}}("nextpod","has-notes-app")},async loadData(){this.isLoading=!0;try{const t=await _.Z.get((0,C.generateUrl)("/apps/nextpod/personal_settings/metrics"));if(!Array.isArray(t.data.actions))throw new Error("expected actions array in metrics response");this.allActions=t.data.actions,this.$emit("actionsAmount",this.allActions.length),this.$emit("subscriptionsAmount",t.data.subscriptions.length),this.updateActionFiltering(this.actionFilter)}catch(n){console.error(n),(0,x.x2)(t("nextpod","Could not fetch podcast synchronization stats"))}finally{this.isLoading=!1}},updateActionFiltering(t){this.actions=this.allActions.filter((n=>n.action===t.action))},loadMoreActions(){this.maxActions+=10}}};var k=a(3379),w=a.n(k),N=a(7795),Z=a.n(N),B=a(569),D=a.n(B),E=a(3565),I=a.n(E),S=a(9216),F=a.n(S),L=a(4589),P=a.n(L),$=a(6946),z={};z.styleTagTransform=P(),z.setAttributes=I(),z.insert=D().bind(null,"head"),z.domAPI=Z(),z.insertStyleElement=F();w()($.Z,z);$.Z&&$.Z.locals&&$.Z.locals;const T=(0,a(1900).Z)(b,(function(){var t=this,n=t._self._c;return n("div",[n("HeaderNavigation",{key:"navigation",attrs:{loading:t.isLoading,title:t.t("nextpod","Episode actions")},on:{refresh:t.loadData},scopedSlots:t._u([{key:"subtitle",fn:function(){return[t._v("\n      "+t._s(t.t("nextpod","Last episode actions synchronized to this Nextcloud account so far."))+"\n    ")]},proxy:!0}])}),t._v(" "),t.actions.length>0?n("div",{staticClass:"actions"},[n("div",{staticClass:"sorting-container"},[n("label",{attrs:{for:"nextpod_action_filtering"}},[t._v("Action:")]),t._v(" "),n("NcMultiselect",{attrs:{id:"nextpod_action_filtering",options:t.actionFilteringOptions,"track-by":"label",label:"label","allow-empty":!1},on:{change:t.updateActionFiltering},model:{value:t.actionFilter,callback:function(n){t.actionFilter=n},expression:"actionFilter"}})],1),t._v(" "),n("ul",t._l(t.actions.slice(0,t.maxActions),(function(i){return n("ActionListItem",{key:i.episode,attrs:{action:i,hasNotesApp:t.hasNotesApp}})})),1),t._v(" "),n("NcActions",[n("NcActionButton",{attrs:{disabled:t.actions.length<t.maxActions},on:{click:t.loadMoreActions},scopedSlots:t._u([{key:"icon",fn:function(){return[n("PageNext")]},proxy:!0}],null,!1,275155479)},[t._v("\n        "+t._s(t.t("nextpod","Load more"))+"\n      ")])],1)],1):t._e(),t._v(" "),0!==t.actions.length||t.isLoading?t._e():n("div",[n("NcEmptyContent",{scopedSlots:t._u([{key:"icon",fn:function(){return[n("Podcast")]},proxy:!0},{key:"title",fn:function(){return[n("h1",[t._v("No episode actions")]),t._v("\n        Start syncing podcasts from your favorite podcast client, such as\n        "),n("a",{staticClass:"link",attrs:{href:"https://antennapod.org/",target:"_blank"}},[t._v("Antennapod")]),t._v(",\n        and then refresh this page to see them pop up here.\n      ")]},proxy:!0}],null,!1,4196619266)})],1)],1)}),[],!1,null,"1995f55c",null).exports},6893:(n,i,a)=>{a.d(i,{Z:()=>y});var e=a(5961);const o={name:"HeaderNavigation",components:{NcButton:e.P2,NcLoadingIcon:e.lb},inheritAttrs:!1,props:{loading:{type:Boolean,default:!1},path:{type:String,default:"/"},title:{type:String,required:!0},rootTitle:{type:String,default:t("nextpodsyn","Podcasts")},params:{type:Object,default:null}},computed:{name(){return this.title}},methods:{refresh(){this.$emit("refresh")},toggleNavigationButton(t){const n=document.querySelector("button.app-navigation-toggle");null!==n&&(n.style.display=t?"none":null)}}};var s=a(3379),r=a.n(s),l=a(7795),c=a.n(l),A=a(569),p=a.n(A),d=a(3565),g=a.n(d),v=a(9216),h=a.n(v),u=a(4589),m=a.n(u),C=a(4108),_={};_.styleTagTransform=m(),_.setAttributes=g(),_.insert=p().bind(null,"head"),_.domAPI=c(),_.insertStyleElement=h();r()(C.Z,_);C.Z&&C.Z.locals&&C.Z.locals;var x=a(2445),f={};f.styleTagTransform=m(),f.setAttributes=g(),f.insert=p().bind(null,"head"),f.domAPI=c(),f.insertStyleElement=h();r()(x.Z,f);x.Z&&x.Z.locals&&x.Z.locals;const y=(0,a(1900).Z)(o,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"nextpod-navigation",attrs:{role:"toolbar"}},[n("div",{staticClass:"nextpod-navigation__title"},[n("h2",{staticClass:"nextpod-navigation__title__main",on:{click:t.refresh}},[t._v("\n\t\t\t"+t._s(t.name)+"\n\t\t")]),t._v(" "),n("div",{staticClass:"nextpod-navigation__title__sub"}),t._v(" "),t._t("subtitle")],2),t._v(" "),t.$slots.default?n("div",{staticClass:"nextpod-navigation__content"},[t._t("default")],2):t._e(),t._v(" "),n("NcLoadingIcon",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"nextpod-navigation__loader"}),t._v(" "),n("div",{staticClass:"nextpod-navigation__content-right"},[t._t("right")],2)],1)}),[],!1,null,"892703f4",null).exports}}]);
//# sourceMappingURL=nextpod-src_views_Actions_vue.js.map?v=e6b01ab72d87045d7c9b